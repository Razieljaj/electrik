<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Volt</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" type="image/x-icon" href="../image/favicon.png">
</head>
<body>
    <br>
    <p style="margin: 30px;"> </p>
    <div class="dialogue">
        <p class="dialogue_text">
            Quel était le mot caché dans mes imperfections ?<br>
        </p>
        <img src="../image/eel/eel.png" class="eel-content">
    </div>

    <!-- Zone de réponse utilisateur -->
    <textarea id="userAnswer" placeholder="Entrez votre réponse ici"></textarea>
    <button onclick="checkAnswer()">Vérifier</button>

    <!-- Section de résultat : visible après réponse -->
    <div id="Bravo" class="dialogue" style="display: none; margin-top: 20px;">
        <div id="resultMessage" class="dialogue_text"></div> <!-- Message de résultat -->
        <button id="nextStepButton" style="display: none; margin-top: 10px;" onclick="window.location.href='../etape2/post_etape2.html'">Aller à l'étape suivante</button>
    </div>

    <script>
        function checkAnswer() {
            // Récupère la réponse utilisateur, convertit en minuscules, et normalise pour enlever les accents
            let userAnswer = document.getElementById('userAnswer').value.trim().toLowerCase();
            
            // Supprime les accents des lettres
            userAnswer = userAnswer.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            
            let message = '';
            
            // Récupère les éléments HTML pour afficher le résultat et le bouton suivant
            const resultMessage = document.getElementById('resultMessage');
            const bravoDiv = document.getElementById('Bravo');
            const nextStepButton = document.getElementById('nextStepButton');
        
            // Affiche la section #Bravo après toute tentative de réponse
            bravoDiv.style.display = "block";
        
            // Vérifie la réponse en ignorant la casse et les accents
            if (userAnswer === 'mephistophelique') {
                message = 'Parfait, J\'ai une proposition pour vous';
                nextStepButton.style.display = "inline-block"; // Affiche le bouton pour passer à l'étape suivante
                nextStepButton.onclick = () => window.location.href = '../finfinale/transi-jamel.html'; // Redirige vers la page de succès
            } else {
                message = 'Non, c\'est dommage, en le retenant il aurait pu vous être utile.';
                nextStepButton.style.display = "inline-block"; // Affiche le bouton pour tenter à nouveau
                nextStepButton.onclick = () => window.location.href = '../fin/transi-jamel.html'; // Redirige vers la page d’échec
            }
        
            // Affiche le message de résultat dans l'élément resultMessage
            resultMessage.innerHTML = message;
        }
        </script>
        
        
    
    
</body>
</html>
